<archetype xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3" xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3" xmlns:org="http://midpoint.evolveum.com/xml/ns/public/common/org-3" xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3" xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" oid="f09cdfcf-a153-42e8-90e8-f55a0835e17d" version="3">
    <name>eduroam</name>
    <extension xmlns:gen537="http://grouper-demo.tier.internet2.edu">
        <gen537:grouperNamePrefix>app:fm:ref:orgrole:</gen537:grouperNamePrefix>
        <gen537:midPointNamePrefix>eduroam_</gen537:midPointNamePrefix>
        <gen537:midPointDisplayNamePrefix>Eduroam Institution: </gen537:midPointDisplayNamePrefix>
    </extension>
    <assignment id="1">
        <targetRef oid="0328d903-510f-4cfa-b991-1b004c27dfeb" relation="org:default" type="c:RoleType">
            <!-- Metarole Grafana Admin -->
        </targetRef>
        <activation>
            <effectiveStatus>enabled</effectiveStatus>
        </activation>
    </assignment>
    <assignment id="4">
        <targetRef oid="bcaec940-50c8-44bb-aa37-b2b5bb2d5b90" relation="org:default" type="c:RoleType">
            <!-- metarole-grouper-provided-group -->
        </targetRef>
        <activation>
            <effectiveStatus>enabled</effectiveStatus>
        </activation>
    </assignment>
    <iteration>0</iteration>
    <iterationToken/>
    <roleMembershipRef oid="bcaec940-50c8-44bb-aa37-b2b5bb2d5b90" relation="org:default" type="c:RoleType">
        <!-- metarole-grouper-provided-group -->
    </roleMembershipRef>
    <roleMembershipRef oid="0328d903-510f-4cfa-b991-1b004c27dfeb" relation="org:default" type="c:RoleType">
        <!-- Metarole Grafana Admin -->
    </roleMembershipRef>
    <activation>
        <effectiveStatus>enabled</effectiveStatus>
        <enableTimestamp>2023-02-21T22:01:02.561Z</enableTimestamp>
    </activation>
    <inducement id="23">
        <construction>
            <resourceRef oid="75e2f666-4c07-46e5-b242-3ad66dc07d17" relation="org:default" type="c:ResourceType">
                <!-- Target: Grafana -->
            </resourceRef>
            <kind>entitlement</kind>
            <intent>group</intent>
        </construction>
        <order>2</order>
        <condition>
            <expression>
                <script>
                    <code>
                        // assignmentPath[0]?.target?.identifier?.endsWith('eduroamadmin')f
                        true
                    </code>
                </script>
            </expression>
        </condition>
    </inducement>
    <inducement id="24">
        <construction>
            <resourceRef oid="75e2f666-4c07-46e5-b242-3ad66dc07d17" relation="org:default" type="c:ResourceType">
                <!-- Target: Grafana -->
            </resourceRef>
            <kind>account</kind>
            <intent>viewer</intent>
            <association id="25">
                <ref>ri:belongsTo</ref>
                <outbound>
                    <strength>strong</strength>
                    <expression>
                        <associationFromLink>
                            <projectionDiscriminator xsi:type="c:ShadowDiscriminatorType">
                                <kind>entitlement</kind>
                                <intent>group</intent>
                            </projectionDiscriminator>
                            <assignmentPathIndex>1</assignmentPathIndex>
                        </associationFromLink>
                    </expression>
                </outbound>
            </association>
        </construction>
        <order>3</order>
    </inducement>
    <inducement id="26">
        <construction>
            <resourceRef oid="75e2f666-4c07-46e5-b242-3ad66dc07d17" relation="org:default" type="c:ResourceType">
                <!-- Target: Grafana -->
            </resourceRef>
            <kind>entitlement</kind>
            <intent>StandardDataSource</intent>
            <association id="27">
                <ref>ri:isTheDatasourceFor</ref>
                <outbound>
                    <strength>strong</strength>
                    <expression>
                        <associationFromLink>
                            <projectionDiscriminator xsi:type="c:ShadowDiscriminatorType">
                                <kind>entitlement</kind>
                                <intent>group</intent>
                            </projectionDiscriminator>
                            <assignmentPathIndex>1</assignmentPathIndex>
                        </associationFromLink>
                    </expression>
                </outbound>
            </association>
        </construction>
        <order>2</order>
    </inducement>
    <archetypePolicy>
        <display>
            <label>Eduroam Institution</label>
            <pluralLabel>Eduroam Institutions</pluralLabel>
            <icon>
                <cssClass>fa fa-building</cssClass>
                <color>darkblue</color>
            </icon>
        </display>
    </archetypePolicy>
</archetype>
